<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <meta name="theme-color" content="#050b14">
  <title>Guess It! V1.3.12 (Ultimate)</title>

  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&family=Space+Grotesk:wght@300;500;700;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

  <style>
    /* --- THEME VARIABLES --- */
    :root {
      --bg: #030712;
      --card-bg: rgba(17, 24, 39, 0.85);
      --border: rgba(99, 102, 241, 0.3);
      --text: #f8fafc;
      --text-muted: #94a3b8;
      
      --primary: #6366f1;
      --primary-glow: rgba(99, 102, 241, 0.5);
      --accent: #f43f5e;
      --gold: #fbbf24;
      
      --font-head: 'Space Grotesk', sans-serif;
      --font-body: 'Outfit', sans-serif;
      --ease: cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    /* --- RESET & BASE --- */
    * { box-sizing: border-box; margin: 0; padding: 0; font-family: var(--font-body); user-select: none; -webkit-tap-highlight-color: transparent; }
    
    body { 
        background: var(--bg); color: var(--text); height: 100vh; overflow: hidden; 
        font-size: 14px; position: relative;
    }

    /* --- ANIMATED BG (HUE CYCLE RESTORED) --- */
    .bg-fx { 
        position: fixed; inset: 0; z-index: -1; 
        background: radial-gradient(circle at 50% 50%, #1e1b4b 0%, #030712 80%);
        animation: hueAnim 20s infinite linear;
    }
    @keyframes hueAnim { 0% { filter: hue-rotate(0deg); } 100% { filter: hue-rotate(360deg); } }

    .bg-grid {
        position: fixed; inset: 0; z-index: -1; opacity: 0.3;
        background-image: linear-gradient(rgba(255, 255, 255, 0.05) 1px, transparent 1px),
                          linear-gradient(90deg, rgba(255, 255, 255, 0.05) 1px, transparent 1px);
        background-size: 40px 40px;
        mask-image: radial-gradient(circle at center, black 40%, transparent 100%);
    }

    /* --- LAYOUT --- */
    .app { 
        max-width: 480px; margin: 0 auto; height: 100%; display: flex; flex-direction: column; 
        opacity: 0; transition: opacity 0.5s; position: relative; z-index: 1; 
    }
    .app.loaded { opacity: 1; }
    .content { flex: 1; overflow-y: auto; padding: 20px 20px 120px 20px; scroll-behavior: smooth; }
    .content::-webkit-scrollbar { display: none; }

    /* --- CARDS --- */
    .card {
        background: var(--card-bg); border: 1px solid var(--border); border-radius: 24px;
        padding: 24px; margin-bottom: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); 
        position: relative; overflow: hidden; backdrop-filter: blur(10px);
    }
    .hero-card { 
        background: linear-gradient(135deg, rgba(255,255,255,0.05), rgba(0,0,0,0.4)); 
        border-color: var(--primary);
    }

    /* --- BUTTONS --- */
    .btn {
        background: rgba(255,255,255,0.05); color: var(--text); border: 1px solid var(--border);
        padding: 16px; border-radius: 18px; font-weight: 700; cursor: pointer; width: 100%;
        display: flex; align-items: center; justify-content: center; gap: 10px;
        font-family: var(--font-head); font-size: 14px; text-transform: uppercase; letter-spacing: 1px;
        transition: transform 0.1s; position: relative; touch-action: manipulation;
    }
    .btn:active { transform: scale(0.97); }
    .btn-primary { background: var(--primary); border: none; color: white; box-shadow: 0 0 20px rgba(99, 102, 241, 0.3); }
    .btn-action { flex-direction: column; padding: 15px; height: 100px; background: rgba(0,0,0,0.4); }
    
    /* Social Login Buttons */
    .btn-social { justify-content: flex-start; margin-bottom: 10px; border: none; font-size: 13px; text-transform: none; font-family: var(--font-body); letter-spacing: 0; }
    .btn-google { background: white; color: #333; }
    .btn-email { background: #334155; color: white; }
    .btn-phone { background: #0ea5e9; color: white; }

    /* --- SPLASH SCREEN --- */
    .splash {
        position: fixed; inset: 0; z-index: 9999; background: #020617;
        display: flex; flex-direction: column; align-items: center; justify-content: center;
        transition: opacity 0.5s; animation: hueAnim 10s infinite linear;
    }
    
    /* 3D CUBE RESTORED */
    .cube-wrap { perspective: 800px; width: 80px; height: 80px; margin-bottom: 30px; }
    .cube { width: 100%; height: 100%; transform-style: preserve-3d; animation: spin 6s infinite linear; }
    .face { 
        position: absolute; width: 80px; height: 80px; 
        background: rgba(255,255,255,0.1); border: 2px solid white; 
        display: flex; align-items: center; justify-content: center; 
        font-size: 32px; font-weight: 900; color: white; 
        box-shadow: 0 0 20px rgba(255,255,255,0.2); 
    }
    .f1 { transform: translateZ(40px); } .f2 { transform: rotateY(180deg) translateZ(40px); }
    .f3 { transform: rotateY(90deg) translateZ(40px); } .f4 { transform: rotateY(-90deg) translateZ(40px); }
    .f5 { transform: rotateX(90deg) translateZ(40px); } .f6 { transform: rotateX(-90deg) translateZ(40px); }
    @keyframes spin { 0% { transform: rotateX(0) rotateY(0); } 100% { transform: rotateX(360deg) rotateY(360deg); } }

    .start-btn {
        width: 200px; height: 50px; background: rgba(255,255,255,0.05); border: 1px solid white; 
        color: white; font-family: var(--font-head); font-weight: bold; letter-spacing: 3px; 
        text-transform: uppercase; cursor: pointer; display: grid; place-items: center;
        transition: 0.3s; margin-top: 20px;
    }
    .start-btn:hover { background: white; color: black; box-shadow: 0 0 30px white; }

    /* --- GAME STAGE --- */
    .logo-stage { 
        width: 180px; height: 180px; background: white; border-radius: 40px; margin: 30px auto; 
        display: flex; align-items: center; justify-content: center; padding: 25px; 
        box-shadow: 0 0 40px var(--primary-glow); border: 2px solid white; position: relative;
    }
    .logo-img { width: 100%; height: 100%; object-fit: contain; z-index: 2; }

    /* --- SETTINGS TOGGLES --- */
    .setting-row { display: flex; justify-content: space-between; align-items: center; padding: 12px 0; border-bottom: 1px solid var(--border); }
    .toggle-switch { width: 40px; height: 20px; background: #333; border-radius: 20px; position: relative; transition: 0.3s; }
    .toggle-switch.on { background: var(--primary); }
    .toggle-switch::after { content:''; position: absolute; left: 2px; top: 2px; width: 16px; height: 16px; background: white; border-radius: 50%; transition: 0.3s; }
    .toggle-switch.on::after { transform: translateX(20px); }

    /* --- MODALS --- */
    .overlay { 
        position: fixed; inset: 0; background: rgba(0,0,0,0.95); backdrop-filter: blur(8px); 
        z-index: 2000; display: flex; align-items: center; justify-content: center; 
        opacity: 0; pointer-events: none; transition: 0.3s; 
    }
    .overlay.open { opacity: 1; pointer-events: auto; }
    .modal { 
        background: #0f172a; width: 90%; max-width: 380px; padding: 30px; 
        border-radius: 32px; border: 1px solid var(--border); text-align: center; 
        transform: scale(0.9); transition: 0.3s var(--ease); 
    }
    .overlay.open .modal { transform: scale(1); }

    /* --- DOCK --- */
    .dock-container {
        position: fixed; bottom: 30px; left: 0; width: 100%; 
        display: flex; justify-content: center; z-index: 999; pointer-events: none;
    }
    .dock { 
        background: rgba(3, 7, 18, 0.9); backdrop-filter: blur(15px); 
        padding: 15px 35px; border-radius: 24px; display: flex; gap: 30px; 
        border: 1px solid var(--border); pointer-events: auto;
    }
    .dock i { font-size: 22px; color: var(--text-muted); transition: 0.3s; cursor: pointer; opacity: 0.7; }
    .dock i.active { color: white; transform: translateY(-5px); opacity: 1; text-shadow: 0 0 15px var(--primary); }

    /* --- UTILS --- */
    .tab-view { display: none; }
    .tab-view.active { display: block; animation: fadeUp 0.4s ease-out; }
    @keyframes fadeUp { from { opacity:0; transform: translateY(10px); } to { opacity:1; transform: translateY(0); } }
    
    .xp-track { height: 6px; background: rgba(255,255,255,0.1); border-radius: 10px; margin-top: 15px; overflow: hidden; }
    .xp-fill { height: 100%; background: linear-gradient(90deg, var(--primary), var(--accent)); width: 0%; transition: width 0.5s; }
  </style>
</head>
<body>
  
  <div class="bg-fx"></div>
  <div class="bg-grid"></div>

  <audio id="bgMusic" loop preload="auto"><source src="FUNK SIGILO SLOWED.mp3" type="audio/mpeg"></audio>

  <div class="splash" id="splash">
    <div class="cube-wrap"><div class="cube"><div class="face f1">G</div><div class="face f2">?</div><div class="face f3">!</div><div class="face f4">#</div><div class="face f5"></div><div class="face f6"></div></div></div>
    <h1 style="font-size: 32px; font-weight: 800; letter-spacing: 4px; margin-bottom: 5px;">GUESSIT!</h1>
    <div style="font-family: var(--font-body); opacity: 0.6; font-size: 12px; letter-spacing: 2px;">V1.3.12</div>
    <div class="start-btn" id="startBtn">SYSTEM LINK</div>
  </div>

  <div class="app" id="app">
    
    <div style="padding: 20px; display: flex; justify-content: space-between; align-items: center;">
        <div style="font-family: var(--font-head); font-weight: 800; font-size: 20px; display: flex; align-items: center; gap: 10px;">
            <i class="fa-solid fa-cube" style="color:var(--primary)"></i> GUESSIT!
        </div>
        <div style="background:rgba(0,0,0,0.4); border:1px solid var(--border); padding:5px 12px; border-radius:20px; font-size:12px; display:flex; align-items:center; gap:6px;">
            <i class="fa-solid fa-coins" style="color:var(--gold)"></i> <span id="uiCoins">0</span>
        </div>
    </div>

    <div class="content">
        
        <div id="tab-home" class="tab-view active">
            <div class="card hero-card">
                <div style="display:flex; justify-content:space-between; align-items:flex-end;">
                    <div>
                        <div style="font-size:10px; color:var(--text-muted); letter-spacing:1px; text-transform:uppercase;">Current Level</div>
                        <div style="font-size:28px; font-weight:900; line-height:1;">Lvl <span id="lvlDisplay">1</span></div>
                    </div>
                    <div style="text-align:right;"><span style="font-size:11px; opacity:0.8;" id="xpText">0 XP</span></div>
                </div>
                <div class="xp-track"><div id="xpBar" class="xp-fill"></div></div>
                <button class="btn btn-primary" style="margin-top:20px;" onclick="startGame()"><i class="fa-solid fa-play"></i> START GAME</button>
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px;">
                <div class="btn btn-action" onclick="alert('Spin coming soon!')">
                    <i class="fa-solid fa-dharmachakra" style="font-size:24px; color:var(--accent); margin-bottom:5px;"></i>
                    <div style="font-size:11px; font-weight:bold; margin-top:5px;">LUCKY SPIN</div>
                </div>
                <div class="btn btn-action" onclick="alert('Calendar coming soon!')">
                    <i class="fa-solid fa-calendar-check" style="font-size:24px; color:var(--gold); margin-bottom:5px;"></i>
                    <div style="font-size:11px; font-weight:bold; margin-top:5px;">STREAK</div>
                </div>
            </div>
            
            <h3 style="font-size:12px; opacity:0.6; margin-bottom:10px;">ACTIVE QUESTS</h3>
            <div style="background:rgba(255,255,255,0.05); padding:15px; border-radius:12px; display:flex; justify-content:space-between;">
                <span>Win Streak Bonus (3x)</span>
                <span style="color:var(--gold)">50 Coins</span>
            </div>
        </div>

        <div id="tab-profile" class="tab-view">
            <div class="card" style="text-align:center;">
                <div style="position:absolute; top:20px; right:20px; cursor:pointer;" onclick="openModal('settingsModal')"><i class="fa-solid fa-sliders"></i></div>
                <img id="profileAvatar" src="" style="width:100px; height:100px; border-radius:50%; border:3px solid var(--primary);">
                <h2 style="font-size:24px; margin-top:15px;" id="profileName">Guest</h2>
                <div style="font-size:12px; color:var(--text-muted); margin-bottom:15px; font-style:italic;" id="profileBio">No bio set.</div>
                
                <div style="display:flex; gap:10px; margin-top:20px;">
                    <div style="flex:1; background:rgba(0,0,0,0.3); padding:10px; border-radius:12px;">
                        <div style="font-size:18px; font-weight:800;" id="stWins">0</div><div style="font-size:10px;">Wins</div>
                    </div>
                    <div style="flex:1; background:rgba(0,0,0,0.3); padding:10px; border-radius:12px;">
                        <div style="font-size:18px; font-weight:800;" id="stStreak">0</div><div style="font-size:10px;">Streak</div>
                    </div>
                </div>
                <button class="btn" style="margin-top:20px;" onclick="openModal('setupModal')">Edit Profile</button>
            </div>
        </div>

    </div>

    <div class="dock-container">
        <div class="dock">
            <i class="fa-solid fa-house active" onclick="nav('home', this)"></i>
            <i class="fa-solid fa-user-astronaut" onclick="nav('profile', this)"></i>
        </div>
    </div>

  </div>

  <div class="overlay" id="authModal">
      <div class="modal">
          <i class="fa-solid fa-shield-halved" style="font-size:40px; color:var(--primary); margin-bottom:20px;"></i>
          <h3>SYSTEM LOGIN</h3>
          <p style="font-size:12px; color:var(--text-muted); margin-bottom:20px;">Choose a secure channel to connect.</p>
          
          <button class="btn btn-social btn-google" onclick="simulateLogin('Google')">
              <i class="fa-brands fa-google"></i> Continue with Google
          </button>
          <button class="btn btn-social btn-email" onclick="simulateLogin('Email')">
              <i class="fa-solid fa-envelope"></i> Continue with Email
          </button>
          <button class="btn btn-social btn-phone" onclick="simulateLogin('Phone')">
              <i class="fa-solid fa-phone"></i> Continue with Phone
          </button>
      </div>
  </div>

  <div class="overlay" id="setupModal">
      <div class="modal">
          <h3>PROFILE DATA</h3>
          <div style="display:flex; justify-content:center; align-items:center; gap:20px; margin:20px 0;">
              <i class="fa-solid fa-chevron-left" onclick="cycleAvatar(-1)"></i>
              <img id="setupAvatar" src="" style="width:80px; height:80px; border-radius:50%; border:2px solid var(--primary);">
              <i class="fa-solid fa-chevron-right" onclick="cycleAvatar(1)"></i>
          </div>
          <input type="text" id="setupName" style="background:rgba(0,0,0,0.3); border:1px solid var(--border); color:white; padding:15px; width:100%; border-radius:12px; text-align:center; outline:none; margin-bottom:10px;" placeholder="Username" maxlength="12">
          <input type="text" id="setupBio" style="background:rgba(0,0,0,0.3); border:1px solid var(--border); color:white; padding:15px; width:100%; border-radius:12px; text-align:center; outline:none;" placeholder="Short Bio / Status" maxlength="30">
          <button class="btn btn-primary" style="margin-top:20px" onclick="completeSetup()">SAVE PROFILE</button>
      </div>
  </div>

  <div class="overlay" id="gameModal">
      <div class="modal">
          <div style="display:flex; justify-content:flex-end;"><i class="fa-solid fa-xmark" onclick="closeModal('gameModal')" style="cursor:pointer; padding:10px;"></i></div>
          <div class="logo-stage">
              <img id="gameImg" class="logo-img" src="">
          </div>
          <input type="text" id="gInput" style="background:transparent; border:none; border-bottom:2px solid var(--border); width:100%; color:white; font-size:24px; text-align:center; padding:10px; margin-bottom:20px; outline:none; font-family:var(--font-head); text-transform:uppercase; letter-spacing:2px;" placeholder="DECODE...">
          <button class="btn btn-primary" onclick="submitGuess()">SUBMIT</button>
      </div>
  </div>

  <div class="overlay" id="settingsModal">
      <div class="modal" style="text-align:left;">
          <h3 style="text-align:center; margin-bottom:20px;">SYSTEM PREFS</h3>
          
          <div class="setting-row">
              <span>Music</span>
              <div class="toggle-switch" id="tgMusic" onclick="toggleSetting('music')"></div>
          </div>
          <div class="setting-row">
              <span>SFX</span>
              <div class="toggle-switch" id="tgSfx" onclick="toggleSetting('sfx')"></div>
          </div>
          <div class="setting-row">
              <span>Haptics</span>
              <div class="toggle-switch" id="tgHaptics" onclick="toggleSetting('haptics')"></div>
          </div>
          
          <button class="btn" style="margin-top:20px; border:none;" onclick="closeModal('settingsModal')">CLOSE</button>
      </div>
  </div>

  <script>
    // --- DATA ---
    const AVATARS = ['Felix', 'Aneka', 'Zoe', 'Marc', 'Bear', 'Bandit'];
    const LOGOS = [
        {n:'Apple',d:'apple.com'},{n:'Google',d:'google.com'},{n:'Microsoft',d:'microsoft.com'},{n:'Tesla',d:'tesla.com'},
        {n:'SpaceX',d:'spacex.com'},{n:'Netflix',d:'netflix.com'},{n:'Spotify',d:'spotify.com'},
        {n:'Twitter',d:'twitter.com'},{n:'YouTube',d:'youtube.com'},{n:'PlayStation',d:'playstation.com'},{n:'Xbox',d:'xbox.com'}
    ];

    let state = {
        user: { name: 'Guest', bio: 'Ready to play.', avatarIdx: 0, isLoggedIn: false },
        currency: { coins: 100 },
        stats: { lvl: 1, xp: 0, wins: 0, streak: 0 },
        settings: { music: false, sfx: true, haptics: true }
    };

    let audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    let bgAudio = document.getElementById('bgMusic');
    let currentGame = null;

    // --- INIT ---
    window.onload = () => {
        try {
            const saved = localStorage.getItem('guessit_1312');
            if(saved) state = { ...state, ...JSON.parse(saved) };
        } catch(e) {}
        
        renderUI();
        updateAvatarPreview();
        updateToggles();

        document.getElementById('startBtn').addEventListener('click', () => {
            triggerHaptic();
            if(audioCtx.state === 'suspended') audioCtx.resume();
            if(state.settings.music) bgAudio.play().catch(()=>{});
            
            document.getElementById('splash').style.opacity = 0;
            setTimeout(() => document.getElementById('splash').style.display='none', 500);
            document.getElementById('app').classList.add('loaded');

            // Trigger Login Flow if guest
            if(!state.user.isLoggedIn) setTimeout(() => openModal('authModal'), 1000);
        });
    };

    // --- AUTH FLOW ---
    function simulateLogin(provider) {
        triggerHaptic();
        playSfx('click');
        // Simulate network delay
        const btn = document.querySelector(`.btn-${provider.toLowerCase()}`);
        const originalText = btn.innerHTML;
        btn.innerHTML = '<i class="fa-solid fa-spinner fa-spin"></i> Connecting...';
        
        setTimeout(() => {
            state.user.isLoggedIn = true;
            closeModal('authModal');
            openModal('setupModal'); // Go to profile setup
            save();
        }, 1500);
    }

    // --- GAMEPLAY & STREAK ---
    function startGame() {
        triggerHaptic();
        playSfx('click');
        currentGame = LOGOS[Math.floor(Math.random()*LOGOS.length)];
        document.getElementById('gameImg').src = `https://logo.clearbit.com/${currentGame.d}`;
        document.getElementById('gInput').value = '';
        openModal('gameModal');
    }

    function submitGuess() {
        const val = document.getElementById('gInput').value.trim().toLowerCase();
        
        if(val === currentGame.n.toLowerCase()) {
            // WIN
            state.stats.wins++;
            state.stats.streak++;
            state.stats.xp += 50;
            
            // Streak Reward Logic
            let reward = 20;
            if(state.stats.streak % 3 === 0) {
                reward += 50;
                playSfx('bonus');
                alert(`STREAK BONUS! +${reward} COINS`);
            } else {
                playSfx('win');
                alert("CORRECT! +20 COINS");
            }
            state.currency.coins += reward;
            triggerHaptic(100); // Heavy vib on win
            closeModal('gameModal');

        } else {
            // LOSE
            state.stats.streak = 0;
            playSfx('lose');
            triggerHaptic([50, 50, 50]); // Pattern vib on lose
            alert("INCORRECT.");
        }
        save(); renderUI();
    }

    // --- AUDIO & HAPTICS ENGINE ---
    function triggerHaptic(pattern = 20) {
        if(state.settings.haptics && navigator.vibrate) {
            navigator.vibrate(pattern);
        }
    }

    function playSfx(type) {
        if(!state.settings.sfx || audioCtx.state === 'suspended') return;
        
        const osc = audioCtx.createOscillator();
        const gain = audioCtx.createGain();
        osc.connect(gain); gain.connect(audioCtx.destination);
        const t = audioCtx.currentTime;

        if(type === 'click') {
            osc.type = 'triangle';
            osc.frequency.setValueAtTime(600, t);
            osc.frequency.exponentialRampToValueAtTime(300, t+0.05);
            gain.gain.setValueAtTime(0.1, t);
            gain.gain.exponentialRampToValueAtTime(0.01, t+0.05);
            osc.start(); osc.stop(t+0.05);
        } else if(type === 'win') {
            osc.type = 'sine';
            osc.frequency.setValueAtTime(500, t);
            osc.frequency.linearRampToValueAtTime(1000, t+0.2);
            gain.gain.setValueAtTime(0.1, t);
            gain.gain.linearRampToValueAtTime(0, t+0.3);
            osc.start(); osc.stop(t+0.3);
        } else if(type === 'lose') {
            osc.type = 'sawtooth';
            osc.frequency.setValueAtTime(200, t);
            osc.frequency.linearRampToValueAtTime(50, t+0.3);
            gain.gain.setValueAtTime(0.1, t);
            gain.gain.linearRampToValueAtTime(0, t+0.3);
            osc.start(); osc.stop(t+0.3);
        } else if(type === 'bonus') {
            osc.type = 'square';
            osc.frequency.setValueAtTime(800, t);
            osc.frequency.setValueAtTime(1200, t+0.1);
            gain.gain.setValueAtTime(0.1, t);
            gain.gain.linearRampToValueAtTime(0, t+0.4);
            osc.start(); osc.stop(t+0.4);
        }
    }

    // --- SETTINGS ---
    function toggleSetting(key) {
        state.settings[key] = !state.settings[key];
        triggerHaptic();
        updateToggles();
        
        if(key === 'music') {
            state.settings.music ? bgAudio.play() : bgAudio.pause();
        }
        save();
    }

    function updateToggles() {
        document.getElementById('tgMusic').className = `toggle-switch ${state.settings.music?'on':''}`;
        document.getElementById('tgSfx').className = `toggle-switch ${state.settings.sfx?'on':''}`;
        document.getElementById('tgHaptics').className = `toggle-switch ${state.settings.haptics?'on':''}`;
    }

    // --- SETUP ---
    function cycleAvatar(dir) {
        state.user.avatarIdx = (state.user.avatarIdx + dir + AVATARS.length) % AVATARS.length;
        updateAvatarPreview();
        triggerHaptic();
    }
    function updateAvatarPreview() {
        const url = `https://api.dicebear.com/9.x/notionists/svg?seed=${AVATARS[state.user.avatarIdx]}`;
        document.getElementById('setupAvatar').src = url;
        document.getElementById('profileAvatar').src = url;
    }
    function completeSetup() {
        const n = document.getElementById('setupName').value.trim();
        const b = document.getElementById('setupBio').value.trim();
        if(n) state.user.name = n;
        if(b) state.user.bio = b;
        save(); renderUI(); closeModal('setupModal');
    }

    // --- UTILS ---
    function renderUI() {
        document.getElementById('uiCoins').innerText = state.currency.coins;
        document.getElementById('lvlDisplay').innerText = state.stats.lvl;
        document.getElementById('xpText').innerText = state.stats.xp + ' XP';
        document.getElementById('xpBar').style.width = Math.min(state.stats.xp%100, 100) + '%';
        
        document.getElementById('profileName').innerText = state.user.name;
        document.getElementById('profileBio').innerText = state.user.bio;
        document.getElementById('stWins').innerText = state.stats.wins;
        document.getElementById('stStreak').innerText = state.stats.streak;
    }
    
    function nav(id, el) {
        triggerHaptic();
        document.querySelectorAll('.tab-view').forEach(t=>t.classList.remove('active'));
        document.getElementById('tab-'+id).classList.add('active');
        document.querySelectorAll('.dock i').forEach(i=>i.classList.remove('active'));
        el.classList.add('active');
    }
    function openModal(id) { document.getElementById(id).classList.add('open'); }
    function closeModal(id) { document.getElementById(id).classList.remove('open'); }
    function save() { localStorage.setItem('guessit_1312', JSON.stringify(state)); }
  </script>
</body>
</html>
